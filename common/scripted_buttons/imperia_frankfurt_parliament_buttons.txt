je_frankfurt_parliament_vote_republic_button = {
	name = "je_frankfurt_parliament_vote_republic_button"
	desc = "je_frankfurt_parliament_vote_republic_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 1
	}
	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				ruler = {
					interest_group = {
						OR = {
							prefers_law = {
								law = law_type:law_presidential_republic
								comparison_law = law_type:law_monarchy
							}
							prefers_law = {
								law = law_type:law_parliamentary_republic
								comparison_law = law_type:law_monarchy
							}
						}
					}
				}
			}
			add = 100
		}
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voting_governance_principle
			global_var:frankfurt_parliament_current_vote = 1
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voted_republic
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voted_republic
	}
	effect = {
		set_variable = frankfurt_parliament_voted_republic
		## Remove this voting var (if it exists, thats what the ?= means)
		remove_variable ?= frankfurt_parliament_voted_monarchy
		custom_tooltip = {
			text = frankfurt_votes_for_republic_tt
		}
	}
}

je_frankfurt_parliament_vote_monarchy_button = {
	name = "je_frankfurt_parliament_vote_monarchy_button"
	desc = "je_frankfurt_parliament_vote_monarchy_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 1
	}
	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				ruler = {
					interest_group = {
						AND = {
							prefers_law = {
								law = law_type:law_monarchy
								comparison_law = law_type:law_presidential_republic
							}
							prefers_law = {
								law = law_type:law_monarchy
								comparison_law = law_type:law_parliamentary_republic
							}
						}
					}
				}
			}
			add = 100
		}
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voting_governance_principle
			global_var:frankfurt_parliament_current_vote = 1
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voted_monarchy
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voted_monarchy
	}
	effect = {
		set_variable = frankfurt_parliament_voted_monarchy
		## Remove this voting var (if it exists, thats what the ?= means)
		remove_variable ?= frankfurt_parliament_voted_republic
		custom_tooltip = {
			text = frankfurt_votes_for_monarchy_tt
		}
	}
}

je_frankfurt_parliament_vote_oligarchy_button = {
	name = "je_frankfurt_parliament_vote_oligarchy_button"
	desc = "je_frankfurt_parliament_vote_oligarchy_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 2
	}
	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				ruler = {
					interest_group = {
						prefers_law = {
							law = law_type:law_oligarchy
							comparison_law = law_type:law_wealth_voting
						}
					}
				}
			}
			add = 100
		}
		modifier = {
			trigger = {
				ruler = {
					interest_group = {
						prefers_law = {
							law = law_type:law_oligarchy
							comparison_law = law_type:law_universal_suffrage
						}
					}
				}
			}
			add = 100
		}
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voting_power_distribution
			global_var:frankfurt_parliament_current_vote = 2
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voted_oligarchy
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voted_oligarchy
	}
	effect = {
		set_variable = frankfurt_parliament_voted_oligarchy
		## Remove these voting vars (if it exists, thats what the ?= means)
		remove_variable ?= frankfurt_parliament_voted_wealth_suffrage
		remove_variable ?= frankfurt_parliament_voted_universal_suffrage
		custom_tooltip = {
			text = frankfurt_votes_for_oligarchy_tt
		}
	}
}

je_frankfurt_parliament_vote_wealth_button = {
	name = "je_frankfurt_parliament_vote_wealth_button"
	desc = "je_frankfurt_parliament_vote_wealth_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 2
	}
	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				ruler = {
					interest_group = {
						prefers_law = {
							law = law_type:law_wealth_voting
							comparison_law = law_type:law_oligarchy
						}
					}
				}
			}
			add = 100
		}
		modifier = {
			trigger = {
				ruler = {
					interest_group = {
						prefers_law = {
							law = law_type:law_wealth_voting
							comparison_law = law_type:law_universal_suffrage
						}
					}
				}
			}
			add = 100
		}
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voting_power_distribution
			global_var:frankfurt_parliament_current_vote = 2
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voted_wealth_suffrage
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voted_wealth_suffrage
	}
	effect = {
		set_variable = frankfurt_parliament_voted_wealth_suffrage
		## Remove these voting vars (if it exists, thats what the ?= means)
		remove_variable ?= frankfurt_parliament_voted_oligarchy
		remove_variable ?= frankfurt_parliament_voted_universal_suffrage
		custom_tooltip = {
			text = frankfurt_votes_for_wealth_voting_tt
		}
	}
}

je_frankfurt_parliament_vote_universal_button = {
	name = "je_frankfurt_parliament_vote_universal_button"
	desc = "je_frankfurt_parliament_vote_universal_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 2
	}
	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				ruler = {
					interest_group = {
						prefers_law = {
							law = law_type:law_universal_suffrage
							comparison_law = law_type:law_oligarchy
						}
					}
				}
			}
			add = 100
		}
		modifier = {
			trigger = {
				ruler = {
					interest_group = {
						prefers_law = {
							law = law_type:law_universal_suffrage
							comparison_law = law_type:law_wealth_voting
						}
					}
				}
			}
			add = 100
		}
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voting_power_distribution
			global_var:frankfurt_parliament_current_vote = 2
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voted_universal_suffrage
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voted_universal_suffrage
	}
	effect = {
		set_variable = frankfurt_parliament_voted_universal_suffrage
		## Remove these voting vars (if it exists, thats what the ?= means)
		remove_variable ?= frankfurt_parliament_voted_oligarchy
		remove_variable ?= frankfurt_parliament_voted_wealth_suffrage
		custom_tooltip = {
			text = frankfurt_votes_for_universal_suffrage_tt
		}
	}
}

je_frankfurt_parliament_vote_presidential_button = {
	name = "je_frankfurt_parliament_vote_presidential_button"
	desc = "je_frankfurt_parliament_vote_presidential_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 3
		has_global_variable = frankfurt_parliament_has_majority_for_republic_var
	}
	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				ruler = {
					interest_group = {
						prefers_law = {
							law = law_type:law_presidential_republic
							comparison_law = law_type:law_parliamentary_republic
						}
					}
				}
			}
			add = 100
		}
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voting_republican_form
			global_var:frankfurt_parliament_current_vote = 3
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voted_presidential
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voted_presidential
	}
	effect = {
		set_variable = frankfurt_parliament_voted_presidential
		## Remove these voting vars (if it exists, thats what the ?= means)
		remove_variable ?= frankfurt_parliament_voted_parliamentary
		custom_tooltip = {
			text = frankfurt_votes_for_presidential_republic_tt
		}
	}
}

je_frankfurt_parliament_vote_parliamentary_button = {
	name = "je_frankfurt_parliament_vote_parliamentary_button"
	desc = "je_frankfurt_parliament_vote_parliamentary_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 3
		has_global_variable = frankfurt_parliament_has_majority_for_republic_var
	}
	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				ruler = {
					interest_group = {
						prefers_law = {
							law = law_type:law_parliamentary_republic
							comparison_law = law_type:law_presidential_republic
						}
					}
				}
			}
			add = 100
		}
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voting_republican_form
			global_var:frankfurt_parliament_current_vote = 3
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voted_parliamentary
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voted_parliamentary
	}
	effect = {
		set_variable = frankfurt_parliament_voted_parliamentary
		## Remove these voting vars (if it exists, thats what the ?= means)
		remove_variable ?= frankfurt_parliament_voted_presidential
		custom_tooltip = {
			text = frankfurt_votes_for_parliamentary_republic_tt
		}
	}
}

je_frankfurt_parliament_lesser_germany_button = {
	name = "je_frankfurt_parliament_lesser_germany_button"
	desc = "je_frankfurt_parliament_lesser_germany_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 4
	}
	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				OR = {
					capital.region = sr:region_north_germany
					capital.region = sr:region_rhine
				}
			}
			add = 100
		}
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voting_german_definition_form
			global_var:frankfurt_parliament_current_vote = 4
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voted_lesser_germany
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voted_lesser_germany
	}
	effect = {
		set_variable = frankfurt_parliament_voted_lesser_germany
		remove_variable ?= frankfurt_parliament_voted_greater_germany
		remove_variable ?= frankfurt_parliament_voted_greater_austria
		custom_tooltip = {
			text = frankfurt_votes_for_lesser_german_solution_tt
		}
	}
}

je_frankfurt_parliament_greater_germany_button = {
	name = "je_frankfurt_parliament_greater_germany_button"
	desc = "je_frankfurt_parliament_greater_germany_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 4
	}
	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				capital.region = sr:region_south_germany
				this != c:AUS
			}
			add = 100
		}
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voting_german_definition_form
			global_var:frankfurt_parliament_current_vote = 4
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voted_greater_germany
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voted_greater_germany
	}
	effect = {
		set_variable = frankfurt_parliament_voted_greater_germany
		remove_variable ?= frankfurt_parliament_voted_lesser_germany
		remove_variable ?= frankfurt_parliament_voted_greater_austria
		custom_tooltip = {
			text = frankfurt_votes_for_greater_german_solution_tt
		}
	}
}

je_frankfurt_parliament_greater_austria_button = {
	name = "je_frankfurt_parliament_greater_austria_button"
	desc = "je_frankfurt_parliament_greater_austria_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 4
	}
	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				this ?= c:AUS
			}
			add = 100
		}
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voting_german_definition_form
			global_var:frankfurt_parliament_current_vote = 4
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voted_greater_austria
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voted_greater_austria
	}
	effect = {
		set_variable = frankfurt_parliament_voted_greater_austria
		remove_variable ?= frankfurt_parliament_voted_greater_germany
		remove_variable ?= frankfurt_parliament_voted_lesser_germany
		custom_tooltip = {
			text = frankfurt_votes_for_greater_austria_german_solution_tt
		}
	}
}

je_frankfurt_parliament_internal_focus_button = {
	name = "je_frankfurt_parliament_internal_focus_button"
	desc = "je_frankfurt_parliament_internal_focus_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 5
		has_global_variable = frankfurt_parliament_has_majority_for_republic_var
		has_global_variable = frankfurt_parliament_has_majority_for_universal_var
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voted_revolutionary_focus
			global_var:frankfurt_parliament_current_vote = 5
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voting_internal_focus
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voting_internal_focus
	}
	effect = {
		set_variable = frankfurt_parliament_voting_internal_focus
		remove_variable ?= frankfurt_parliament_voting_external_focus
		# remove other var
		custom_tooltip = {
			text = frankfurt_votes_for_internal_focus_tt
		}
	}
}

je_frankfurt_parliament_external_focus_button = {
	name = "je_frankfurt_parliament_external_focus_button"
	desc = "je_frankfurt_parliament_external_focus_button_desc"
	visible = {
		has_global_variable = frankfurt_parliament_current_vote
		global_var:frankfurt_parliament_current_vote = 5
		has_global_variable = frankfurt_parliament_has_majority_for_republic_var
		has_global_variable = frankfurt_parliament_has_majority_for_universal_var
	}
	possible = {
		custom_tooltip = {
			text = frankfurt_parliament_voted_revolutionary_focus
			global_var:frankfurt_parliament_current_vote = 5
		}
		hidden_trigger = {
			NOT = {
				has_variable = frankfurt_parliament_voting_external_focus
			}
		}
	}
	selected = {
		has_variable = frankfurt_parliament_voting_external_focus
	}
	effect = {
		set_variable = frankfurt_parliament_voting_external_focus
		remove_variable ?= frankfurt_parliament_voting_internal_focus
		custom_tooltip = {
			text = frankfurt_votes_for_external_focus_tt
		}
	}
}

je_frankfurt_parliament_leave_button = {
	name = "je_frankfurt_parliament_leave_button"
	desc = "je_frankfurt_parliament_leave_button_desc"
	visible = {
		always = yes
	}
	ai_chance = {
		base = 0
	}
	possible = {
		custom_tooltip = {
			text = does_not_own_frankfurt_city_tt
			p:x11C0A0 = {
				owner != root
			}
		}
	}
	effect = {
		# The leaving variable should fail the JE automatically
		# Sets a variable called 'left_frankfurt_parliament' to 'true' (the default when using set_variable this way)
		custom_tooltip = frankfurt_parliament_leaves_tt
		set_variable = left_frankfurt_parliament
	}
}

je_frankfurt_gutter_king_sway_button = {
	name = "je_frankfurt_gutter_king_sway_button"
	desc = "je_frankfurt_gutter_king_sway_button_desc"
	visible = {
		always = yes
	}
	ai_chance = {
		base = 1000
	}
	possible = {
		prestige >= 5
		custom_tooltip = {
			text = frankfurt_been_14_days_since_last_sway_tt
			NOT = {
				has_variable = je_frankfurt_gutter_king_sway_button_cooldown
			}
		}
		any_country = {
			has_journal_entry = je_imperia_frankfurt_german_consolidation_german_minor
			NOT = {
				is_subject_of = root
			}
			NOT = {
				has_modifier = german_major_prestige_positive
			}
		}
	}
	effect = {
		set_variable = {
			name = je_frankfurt_gutter_king_sway_button_cooldown
			days = 14
		}
		random_country = {
			limit = {
				has_journal_entry = je_imperia_frankfurt_german_consolidation_german_minor
				NOT = {
					is_subject_of = root
				}
				NOT = {
					has_modifier = german_major_prestige_positive
				}
			}
			trigger_event = {
				id = frankfurt_parliament.5
				popup = yes
			}
			custom_label = obligation_events.a.tt
			show_as_tooltip = {
				root = {
					create_diplomatic_pact = {
						country = prev
						type = dominion
					}
				}
				add_modifier = {
					name = gutter_king_prestige_positive
					months = 60
				}
				root = {
					add_modifier = {
						name = gutter_king_prestige_negative
						months = 60
					}
				}
			}
			custom_label = obligation_events.b.tt
		}
	}
}

je_frankfurt_german_major_sway_button = {
	name = "je_frankfurt_german_major_sway_button"
	desc = "je_frankfurt_german_major_sway_button_desc"
	visible = {
		always = yes
	}
	ai_chance = {
		base = 1000
	}
	possible = {
		prestige >= 10
		custom_tooltip = {
			text = frankfurt_been_28_days_since_last_sway_tt
			NOT = {
				has_variable = je_frankfurt_german_major_sway_button_cooldown
			}
		}
		any_country = {
			has_journal_entry = je_imperia_frankfurt_german_consolidation_german_minor
			NOT = {
				has_modifier = german_major_prestige_positive
			}
		}
	}
	effect = {
		set_variable = {
			name = je_frankfurt_german_major_sway_button_cooldown
			days = 28
		}
		random_country = {
			limit = {
				has_journal_entry = je_imperia_frankfurt_german_consolidation_german_minor
				NOT = {
					has_modifier = german_major_prestige_positive
				}
			}
			trigger_event = {
				id = frankfurt_parliament.6
				popup = yes
			}
			custom_label = obligation_events.a.tt
			show_as_tooltip = {
				remove_modifier ?= gutter_king_prestige_positive
				add_modifier = {
					name = german_major_prestige_positive
					months = 60
				}
				make_independent = yes
				if = {
					limit = {
						has_variable = frankfurt_parliament_original_overlord
					}
					var:frankfurt_parliament_original_overlord = {
						create_diplomatic_pact = {
							country = prev
							type = customs_union
						}
					}
				}
				root = {
					add_modifier = {
						name = german_major_prestige_negative
						months = 60
					}
				}
			}
			custom_label = obligation_events.b.tt
		}
	}
}
