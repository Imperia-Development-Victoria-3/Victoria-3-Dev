frankfurt_parliament_has_majority_for_republic = {
	OR = {
		# Either theres more republic voters and monarchy voters
		imperia_frankfurt_parliament_republic_voters_value > imperia_frankfurt_parliament_monarchy_voters_value
		AND = {
			# Or the two are equal
			imperia_frankfurt_parliament_republic_voters_value = imperia_frankfurt_parliament_monarchy_voters_value
			# But the owner of Frankfurt is voting republican
			p:x11C0A0 = {
				owner = {
					has_variable = frankfurt_parliament_voted_republic
				}
			}
		}
	}
}

frankfurt_parliament_has_majority_for_oligarchy = {
	# Either...
	OR = {
		# Oligarchy beat the 2 others
		AND = {
			imperia_frankfurt_parliament_oligarchy_voters_value > imperia_frankfurt_parliament_wealth_voters_value
			imperia_frankfurt_parliament_oligarchy_voters_value > imperia_frankfurt_parliament_universal_voters_value
		}
		# Or oligarchy didnt lose, and Frankfurt voted for it
		# (means a tie happened with at least one of them, possibly both)
		AND = {
			NOT = {
				imperia_frankfurt_parliament_oligarchy_voters_value < imperia_frankfurt_parliament_wealth_voters_value
			}
			NOT = {
				imperia_frankfurt_parliament_oligarchy_voters_value < imperia_frankfurt_parliament_universal_voters_value
			}
			p:x11C0A0 = {
				owner = {
					has_variable = frankfurt_parliament_voted_oligarchy
				}
			}
		}
	}
}

frankfurt_parliament_has_majority_for_wealth = {
	# Either...
	OR = {
		# wealth beat the 2 others
		AND = {
			imperia_frankfurt_parliament_wealth_voters_value > imperia_frankfurt_parliament_oligarchy_voters_value
			imperia_frankfurt_parliament_wealth_voters_value > imperia_frankfurt_parliament_universal_voters_value
		}
		# Or wealth didnt lose, and Frankfurt voted for it
		# (means a tie happened with at least one of them, possibly both)
		AND = {
			NOT = {
				imperia_frankfurt_parliament_wealth_voters_value < imperia_frankfurt_parliament_oligarchy_voters_value
			}
			NOT = {
				imperia_frankfurt_parliament_wealth_voters_value < imperia_frankfurt_parliament_universal_voters_value
			}
			p:x11C0A0 = {
				owner = {
					has_variable = frankfurt_parliament_voted_wealth_suffrage
				}
			}
		}
	}
}

frankfurt_parliament_has_majority_for_universal = {
	# Either...
	OR = {
		# universal suffrage beat the 2 others
		AND = {
			imperia_frankfurt_parliament_universal_voters_value > imperia_frankfurt_parliament_oligarchy_voters_value
			imperia_frankfurt_parliament_universal_voters_value > imperia_frankfurt_parliament_wealth_voters_value
		}
		# Or universal suffrage didnt lose, and Frankfurt voted for it
		# (means a tie happened with at least one of them, possibly both)
		AND = {
			NOT = {
				imperia_frankfurt_parliament_universal_voters_value < imperia_frankfurt_parliament_oligarchy_voters_value
			}
			NOT = {
				imperia_frankfurt_parliament_universal_voters_value < imperia_frankfurt_parliament_wealth_voters_value
			}
			p:x11C0A0 = {
				owner = {
					has_variable = frankfurt_parliament_voted_universal_suffrage
				}
			}
		}
	}
}

frankfurt_parliament_has_majority_for_presidential_republic = {
	has_global_variable = frankfurt_parliament_has_majority_for_republic_var
	OR = {
		imperia_frankfurt_parliament_presidential_voters_value > imperia_frankfurt_parliament_parliamentary_voters_value
		AND = {
			imperia_frankfurt_parliament_presidential_voters_value = imperia_frankfurt_parliament_parliamentary_voters_value
			p:x11C0A0 = {
				owner = {
					has_variable = frankfurt_parliament_voted_presidential
				}
			}
		}
		has_global_variable = frankfurt_parliament_has_majority_for_oligarchy_var
	}
}

frankfurt_parliament_has_majority_for_parliamentary_republic = {
	has_global_variable = frankfurt_parliament_has_majority_for_republic_var
	OR = {
		imperia_frankfurt_parliament_parliamentary_voters_value > imperia_frankfurt_parliament_presidential_voters_value
		AND = {
			imperia_frankfurt_parliament_parliamentary_voters_value = imperia_frankfurt_parliament_presidential_voters_value
			p:x11C0A0 = {
				owner = {
					has_variable = frankfurt_parliament_voted_parliamentary
				}
			}
		}
		has_global_variable = frankfurt_parliament_has_majority_for_universal_var
	}
}

frankfurt_parliament_has_majority_for_lesser_germany = {
	# Either...
	OR = {
		# Lesser Germany beat the 2 others
		AND = {
			imperia_frankfurt_parliament_lesser_germany_voters_value > imperia_frankfurt_parliament_greater_germany_voters_value
			imperia_frankfurt_parliament_lesser_germany_voters_value > imperia_frankfurt_parliament_greater_austria_voters_value
		}
		# Or lesser germany didnt lose, and Frankfurt voted for it
		# (means a tie happened with at least one of them, possibly both)
		AND = {
			NOT = {
				imperia_frankfurt_parliament_lesser_germany_voters_value < imperia_frankfurt_parliament_greater_germany_voters_value
			}
			NOT = {
				imperia_frankfurt_parliament_lesser_germany_voters_value < imperia_frankfurt_parliament_greater_austria_voters_value
			}
			p:x11C0A0 = {
				owner = {
					has_variable = frankfurt_parliament_voted_lesser_germany
				}
			}
		}
	}
}

frankfurt_parliament_has_majority_for_greater_germany = {
	# Either...
	OR = {
		# greater Germany beat the 2 others
		AND = {
			imperia_frankfurt_parliament_greater_germany_voters_value > imperia_frankfurt_parliament_lesser_germany_voters_value
			imperia_frankfurt_parliament_greater_germany_voters_value > imperia_frankfurt_parliament_greater_austria_voters_value
		}
		# Or greater germany didnt lose, and Frankfurt voted for it
		# (means a tie happened with at least one of them, possibly both)
		AND = {
			NOT = {
				imperia_frankfurt_parliament_greater_germany_voters_value < imperia_frankfurt_parliament_lesser_germany_voters_value
			}
			NOT = {
				imperia_frankfurt_parliament_greater_germany_voters_value < imperia_frankfurt_parliament_greater_austria_voters_value
			}
			p:x11C0A0 = {
				owner = {
					has_variable = frankfurt_parliament_voted_greater_germany
				}
			}
		}
	}
}

frankfurt_parliament_has_majority_for_greater_austria = {
	# Either...
	OR = {
		# greater austria beat the 2 others
		AND = {
			imperia_frankfurt_parliament_greater_austria_voters_value > imperia_frankfurt_parliament_lesser_germany_voters_value
			imperia_frankfurt_parliament_greater_austria_voters_value > imperia_frankfurt_parliament_greater_germany_voters_value
		}
		# Or greater austria didnt lose, and Frankfurt voted for it
		# (means a tie happened with at least one of them, possibly both)
		AND = {
			NOT = {
				imperia_frankfurt_parliament_greater_austria_voters_value < imperia_frankfurt_parliament_lesser_germany_voters_value
			}
			NOT = {
				imperia_frankfurt_parliament_greater_austria_voters_value < imperia_frankfurt_parliament_greater_germany_voters_value
			}
			p:x11C0A0 = {
				owner = {
					has_variable = frankfurt_parliament_voted_greater_austria
				}
			}
		}
	}
}

frankfurt_parliament_has_majority_for_internal_focus = {
	has_global_variable = frankfurt_parliament_has_majority_for_republic_var
	has_global_variable = frankfurt_parliament_has_majority_for_universal_var
	imperia_frankfurt_parliament_internal_focus_voters_value > imperia_frankfurt_parliament_external_focus_voters_value
}

frankfurt_parliament_has_majority_for_external_focus = {
	has_global_variable = frankfurt_parliament_has_majority_for_republic_var
	has_global_variable = frankfurt_parliament_has_majority_for_universal_var
	imperia_frankfurt_parliament_internal_focus_voters_value < imperia_frankfurt_parliament_external_focus_voters_value
}

frankfurt_parliament_prince_will_join_gutter_king = {
	# scope = GUTTER KING
	# root = PRINCE
	# GP princes will NEVER join the Gutter King
	OR = {
		AND = {
			country_rank = rank_value:major_power
			root.country_rank <= rank_value:major_power
		}
		AND = {
			country_rank = rank_value:minor_power
			root.country_rank <= rank_value:major_power
		}
		AND = {
			country_rank = rank_value:insignificant_power
			root.country_rank <= rank_value:minor_power
			# Special mention for Bavaria and Hanover, who didnt join the Frankfurt-led German empire...
			trigger_if = {
				limit = {
					exists = c:BAV
				}
				root != c:BAV
			}
			trigger_if = {
				limit = {
					exists = c:HAN
				}
				root != c:HAN
			}
		}
	}
}

frankfurt_parliament_gutter_king_is_consolidating = {
	OR = {
		has_global_variable = frankfurt_parliament_has_majority_for_lesser_germany_var
		has_global_variable = frankfurt_parliament_has_majority_for_greater_germany_var
		has_global_variable = frankfurt_parliament_has_majority_for_greater_austria_var
	}
	any_state_region = {
		filter = {
			any_scope_state = {
				frankfurt_parliament_state_is_gutter_german = yes
			}
		}
		any_scope_state = {
			owner = {
				OR = {
					this = root
					this = {
						is_subject_of = root
						NOT = {
							is_subject_type = subject_type_customs_union
						}
					}
				}
			}
		}
		percent >= 0.75
	}
}

frankfurt_parliament_state_is_gutter_german = {
	trigger_if = {
		limit = {
			has_global_variable = frankfurt_parliament_has_majority_for_lesser_germany_var
		}
		# "Traditional" german states, Kleindeutschland
		this = {
			OR = {
				state_region = s:STATE_HESSE
				state_region = s:STATE_HANNOVER
				state_region = s:STATE_BRUNSWICK
				state_region = s:STATE_ELBE
				state_region = s:STATE_SCHLESWIG_HOLSTEIN
				state_region = s:STATE_POMERANIA
				state_region = s:STATE_MECKLENBURG
				state_region = s:STATE_BRANDENBURG
				state_region = s:STATE_ANHALT
				state_region = s:STATE_SAXONY
				state_region = s:STATE_RHINELAND
				state_region = s:STATE_NORTH_RHINE
				state_region = s:STATE_WESTPHALIA
				state_region = s:STATE_RUHR
				state_region = s:STATE_FRANCONIA
				state_region = s:STATE_BAVARIA
				state_region = s:STATE_WURTTEMBERG
				state_region = s:STATE_BADEN
				state_region = s:STATE_POSEN
				state_region = s:STATE_SILESIA
				state_region = s:STATE_WEST_PRUSSIA
				state_region = s:STATE_EAST_PRUSSIA
			}
		}
	}
	trigger_else_if = {
		limit = {
			has_global_variable = frankfurt_parliament_has_majority_for_greater_germany_var
		}
		# German Confederation states, historically the option chossen by the Parliament (no Prussian-Polish lands + German Austria/Bohemia)
		this = {
			OR = {
				state_region = s:STATE_HESSE
				state_region = s:STATE_HANNOVER
				state_region = s:STATE_BRUNSWICK
				state_region = s:STATE_ELBE
				state_region = s:STATE_SCHLESWIG_HOLSTEIN
				state_region = s:STATE_POMERANIA
				state_region = s:STATE_MECKLENBURG
				state_region = s:STATE_BRANDENBURG
				state_region = s:STATE_ANHALT
				state_region = s:STATE_SAXONY
				state_region = s:STATE_RHINELAND
				state_region = s:STATE_NORTH_RHINE
				state_region = s:STATE_WESTPHALIA
				state_region = s:STATE_RUHR
				state_region = s:STATE_FRANCONIA
				state_region = s:STATE_BAVARIA
				state_region = s:STATE_WURTTEMBERG
				state_region = s:STATE_BADEN
				state_region = s:STATE_SILESIA
				state_region = s:STATE_TYROL
				state_region = s:STATE_SOUTH_TYROL
				state_region = s:STATE_STYRIA
				state_region = s:STATE_AUSTRIA
				state_region = s:STATE_MORAVIA
				state_region = s:STATE_BOHEMIA
			}
		}
	}
	trigger_else_if = {
		limit = {
			has_global_variable = frankfurt_parliament_has_majority_for_greater_austria_var
		}
		# Highly hypothetical Greater, Greater German Empire, asked for by some Austrian members. Included *all* of Austria besides everything else.any_scope_state = {
		# Also includes Switzerland, because why the hell not at this point..
		this = {
			OR = {
				state_region = s:STATE_HESSE
				state_region = s:STATE_HANNOVER
				state_region = s:STATE_BRUNSWICK
				state_region = s:STATE_ELBE
				state_region = s:STATE_SCHLESWIG_HOLSTEIN
				state_region = s:STATE_POMERANIA
				state_region = s:STATE_MECKLENBURG
				state_region = s:STATE_BRANDENBURG
				state_region = s:STATE_ANHALT
				state_region = s:STATE_SAXONY
				state_region = s:STATE_RHINELAND
				state_region = s:STATE_NORTH_RHINE
				state_region = s:STATE_WESTPHALIA
				state_region = s:STATE_RUHR
				state_region = s:STATE_FRANCONIA
				state_region = s:STATE_BAVARIA
				state_region = s:STATE_WURTTEMBERG
				state_region = s:STATE_BADEN
				state_region = s:STATE_SILESIA
				state_region = s:STATE_TYROL
				state_region = s:STATE_SOUTH_TYROL
				state_region = s:STATE_STYRIA
				state_region = s:STATE_AUSTRIA
				state_region = s:STATE_MORAVIA
				state_region = s:STATE_BOHEMIA
				state_region = s:STATE_ALSACE_LORRAINE
				AND = {
					# If it's not on the German Confederation list it can pass if its owned by Austria, Prussia or Switzerland if the state is European
					state_is_in_europe = yes
					OR = {
						owner ?= c:AUS
						owner ?= c:PRU
						owner ?= c:SWI
					}
				}
			}
		}
	}
	trigger_else = {
		# If no consensus has been reached (yet) then there's no states to claim
		always = no
	}
}

imperia_frankfurt_parliament_is_in_session = {
	custom_tooltip = {
		text = imperia_frankfurt_parliament_is_in_session_tt
		any_country = {
			count >= 1
			OR = {
				has_journal_entry = je_imperia_frankfurt_parliament
				has_journal_entry = je_imperia_frankfurt_german_consolidation_gutter_king
				has_journal_entry = je_imperia_frankfurt_german_consolidation_german_major
				has_journal_entry = je_imperia_frankfurt_german_consolidation_german_minor
				has_variable = frankfurt_parliament_voting_for_gutter_king
				has_variable = frankfurt_parliament_considering_gutter_crown
			}
		}
	}
}

imperia_frankfurt_parliament_law_is_preferred_by_dominating_left_ai_trigger = {
	var:frankfurt_parliament_left_faction_influence > var:frankfurt_parliament_center_faction_influence
	var:frankfurt_parliament_left_faction_influence > var:frankfurt_parliament_right_faction_influence
}

imperia_frankfurt_parliament_law_is_preferred_by_dominating_center_ai_trigger = {
	var:frankfurt_parliament_center_faction_influence > var:frankfurt_parliament_left_faction_influence
	var:frankfurt_parliament_center_faction_influence > var:frankfurt_parliament_right_faction_influence
}

imperia_frankfurt_parliament_law_is_preferred_by_dominating_right_ai_trigger = {
	var:frankfurt_parliament_right_faction_influence > var:frankfurt_parliament_left_faction_influence
	var:frankfurt_parliament_right_faction_influence > var:frankfurt_parliament_center_faction_influence
}

imperia_frankfurt_parliament_lesser_germany_is_preferred_trigger = {
	has_variable = lesser_germany_ai_willingness
	has_variable = greater_germany_ai_willingness
	has_variable = greater_austria_ai_willingness
	var:lesser_germany_ai_willingness > var:greater_germany_ai_willingness
	var:lesser_germany_ai_willingness > var:greater_austria_ai_willingness
}

imperia_frankfurt_parliament_greater_germany_is_preferred_trigger = {
	has_variable = lesser_germany_ai_willingness
	has_variable = greater_germany_ai_willingness
	has_variable = greater_austria_ai_willingness
	var:greater_germany_ai_willingness > var:lesser_germany_ai_willingness
	var:greater_germany_ai_willingness > var:greater_austria_ai_willingness
}

imperia_frankfurt_parliament_greater_austria_is_preferred_trigger = {
	has_variable = lesser_germany_ai_willingness
	has_variable = greater_germany_ai_willingness
	has_variable = greater_austria_ai_willingness
	var:greater_austria_ai_willingness > var:lesser_germany_ai_willingness
	var:greater_austria_ai_willingness > var:greater_germany_ai_willingness
}

imperia_frankfurt_parliament_country_has_sway_targets = {
	any_country = {
		has_journal_entry = je_imperia_frankfurt_german_consolidation_german_minor
		custom_tooltip = {
			text = frankfurt_been_3_months_since_last_sway_on_this_country_tt
			NOT = {
				has_variable = je_frankfurt_minor_recently_swayed
			}
		}
		trigger_if = {
			limit = {
				root = {
					has_variable = sway_target_north
				}
			}
			country_has_primary_culture = cu:north_german
		}
		trigger_else_if = {
			limit = {
				root = {
					has_variable = sway_target_south
				}
			}
			country_has_primary_culture = cu:south_german
		}
		trigger_if = {
			limit = {
				root = {
					has_variable = sway_loyalty_min
				}
			}
			trigger_if = {
				limit = {
					root = {
						has_journal_entry = je_imperia_frankfurt_german_consolidation_gutter_king
					}
				}
				OR = {
					has_modifier = german_major_solid_sway
					has_modifier = german_major_complete_sway
				}
			}
			trigger_else_if = {
				limit = {
					root = {
						has_journal_entry = je_imperia_frankfurt_german_consolidation_german_major
					}
				}
				OR = {
					has_modifier = gutter_king_solid_sway
					has_modifier = gutter_king_complete_sway
				}
			}
		}
		trigger_else_if = {
			limit = {
				root = {
					has_variable = sway_loyalty_max
				}
			}
			trigger_if = {
				limit = {
					root = {
						has_journal_entry = je_imperia_frankfurt_german_consolidation_gutter_king
					}
				}
				NOT = {
					has_modifier = gutter_king_complete_sway
				}
			}
			trigger_else_if = {
				limit = {
					root = {
						has_journal_entry = je_imperia_frankfurt_german_consolidation_german_major
					}
				}
				NOT = {
					has_modifier = german_major_complete_sway
				}
			}
		}
	}
}

imperia_frankfurt_parliament_TARGET_can_be_swayed_by_SWAYER = {
	# TARGET : german minor
	# SWAYER : german major/gutter king
	$TARGET$ = {
		has_journal_entry = je_imperia_frankfurt_german_consolidation_german_minor
		NOT = {
			has_variable = je_frankfurt_minor_recently_swayed
		}
		trigger_if = {
			limit = {
				$SWAYER$ = {
					has_variable = sway_target_north
				}
			}
			country_has_primary_culture = cu:north_german
		}
		trigger_else_if = {
			limit = {
				$SWAYER$ = {
					has_variable = sway_target_south
				}
			}
			country_has_primary_culture = cu:south_german
		}
		trigger_if = {
			limit = {
				$SWAYER$ = {
					has_variable = sway_loyalty_min
				}
			}
			trigger_if = {
				limit = {
					$SWAYER$ = {
						has_journal_entry = je_imperia_frankfurt_german_consolidation_gutter_king
					}
				}
				OR = {
					has_modifier = german_major_solid_sway
					has_modifier = german_major_complete_sway
				}
			}
			trigger_else_if = {
				limit = {
					$SWAYER$ = {
						has_journal_entry = je_imperia_frankfurt_german_consolidation_german_major
					}
				}
				OR = {
					has_modifier = gutter_king_solid_sway
					has_modifier = gutter_king_complete_sway
				}
			}
		}
		trigger_else_if = {
			limit = {
				$SWAYER$ = {
					has_variable = sway_loyalty_max
				}
			}
			trigger_if = {
				limit = {
					$SWAYER$ = {
						has_journal_entry = je_imperia_frankfurt_german_consolidation_gutter_king
					}
				}
				NOT = {
					has_modifier = gutter_king_complete_sway
				}
			}
			trigger_else_if = {
				limit = {
					$SWAYER$ = {
						has_journal_entry = je_imperia_frankfurt_german_consolidation_german_major
					}
				}
				NOT = {
					has_modifier = german_major_complete_sway
				}
			}
		}
	}
}
