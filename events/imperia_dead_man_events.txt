namespace = dead_man
# start event
dead_man.1 = {
	type = country_event
	placement = root
	title = dead_man.1.t
	desc = dead_man.1.d
	flavor = dead_man.1.f
	duration = 3
	event_image = {
		video = "unspecific_politicians_arguing"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	cooldown = {
		months = normal_modifier_time
	}
	trigger = {
		NOT = {
			has_variable = dead_man_startup_var
		}
	}
	immediate = {
		set_variable = dead_man_startup_var
		add_journal_entry = {
			type = je_dead_man_main
		}
	}
	option = {
		# Support Republican
		name = dead_man.1.a
		default_option = yes
		set_variable = chose_initial_turk_government
		if = {
			limit = {
				ig:ig_intelligentsia.leader = {
					NOT = {
						OR = {
							has_ideology = ideology:ideology_republican_leader
							has_ideology = ideology:ideology_radical
							has_ideology = ideology:ideology_atheist							# nihilist
							has_ideology = ideology:ideology_liberal_leader							#democrat
							has_ideology = ideology:ideology_positivist
							has_ideology = ideology:ideology_market_liberal
						}
					}
				}
			}
			ig:ig_intelligentsia.leader = {
				set_ideology = ideology:ideology_republican_leader
				add_modifier = {
					name = dead_man_revolutionary
				}
			}
		}
		remove_variable ?= supporting_theocracy_var 
		remove_variable ?= supporting_communist_var 
		custom_tooltip = {
			text = republican_progress_increase_15_tt
			change_variable = {
				name = republican_progress
				add = 15
			}
		}
		set_variable = supporting_republican_var
		add_journal_entry = {
			type = je_dead_man_main
		}
	}
	option = {
		# Support Theocracy
		name = dead_man.1.b
		set_variable = chose_initial_turk_government
		if = {
			limit = {
				ig:ig_devout.leader = {
					NOT = {
						OR = {
							has_ideology = ideology:ideology_theocrat
							has_ideology = ideology:ideology_traditionalist
							has_ideology = ideology:ideology_authoritarian
							has_ideology = ideology:ideology_slaver
							has_ideology = ideology:ideology_corporatist
						}
					}
				}
			}
			ig:ig_devout.leader = {
				set_ideology = ideology:ideology_theocrat
				add_modifier = {
					name = dead_man_revolutionary
				}
			}
		}
		remove_variable ?= supporting_republican_var 
		remove_variable ?= supporting_communist_var 
		custom_tooltip = {
			text = theocracy_progress_increase_15_tt
			change_variable = {
				name = theocracy_progress
				add = 15
			}
		}
		set_variable = supporting_theocracy_var
	}
	option = {
		# Support Communist
		name = dead_man.1.c
		set_variable = chose_initial_turk_government
		if = {
			limit = {
				ig:ig_trade_unions.leader = {
					NOT = {
						OR = {
							has_ideology = ideology:ideology_communist
							has_ideology = ideology:ideology_vanguardist
							has_ideology = ideology:ideology_anarchist
							has_ideology = ideology:ideology_social_democrat
							has_ideology = ideology:ideology_humanitarian
						}
					}
				}
			}
			ig:ig_trade_unions.leader = {
				set_ideology = ideology:ideology_communist
				add_modifier = {
					name = dead_man_revolutionary
				}
			}
		}
		remove_variable ?= supporting_theocracy_var 
		remove_variable ?= supporting_republican_var 
		custom_tooltip = {
			text = communist_progress_increase_15_tt
			change_variable = {
				name = communist_progress
				add = 15
			}
		}
		set_variable = supporting_communist_var
	}
}

# COMMUNIST END EVENT
dead_man.2 = {
	type = country_event
	placement = root
	title = dead_man.2.t
	desc = dead_man.2.d
	flavor = dead_man.2.f
	duration = 3
	event_image = {
		video = "europenorthamerica_springtime_of_nations"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/protest.dds"
	cooldown = {
		months = normal_modifier_time
	}
	trigger = {
		NOT = {
			has_variable = dead_man_ended_var
		}
	}
	immediate = {
		set_variable = dead_man_ended_var
		remove_modifier ?= outmoded_bureaucracy
		remove_modifier ?= cizye_tax
		remove_modifier ?= stagnant_economy
		remove_modifier ?= janissary_legacy
		remove_modifier ?= rampant_piracy
		remove_modifier ?= kurdish_question
		remove_modifier ?= balkan_disarray
		remove_modifier ?= imbalanced_education
		remove_modifier ?= internal_strife
	}
	option = {
		# Supported Communists 1
		name = dead_man.2.a
		trigger = {
			dead_man_communists_winning = yes
		}
		set_country_type = recognized
		activate_law = law_type:law_council_republic
		activate_law = law_type:law_anarchy
		activate_law = law_type:law_collectivized_agriculture
		activate_law = law_type:law_cooperative_ownership
		activate_law = law_type:law_total_separation
		activate_law = law_type:law_protected_speech
		activate_law = law_type:law_guaranteed_liberties
		activate_law = law_type:law_disarmed_police
		activate_law = law_type:law_national_militia
		add_modifier = {
			name = dead_man_coup_success
			months = long_modifier_time
		}
	}
	option = {
		# Supported Communists 2
		name = dead_man.2.b
		trigger = {
			dead_man_communists_winning = yes
		}
		set_country_type = recognized
		activate_law = law_type:law_council_republic
		activate_law = law_type:law_universal_suffrage
		activate_law = law_type:law_multicultural
		activate_law = law_type:law_collectivized_agriculture
		activate_law = law_type:law_cooperative_ownership
		activate_law = law_type:law_state_atheism
		activate_law = law_type:law_worker_protections
		activate_law = law_type:law_old_age_pension
		add_modifier = {
			name = dead_man_coup_success
			months = long_modifier_time
		}
	}
	option = {
		# Supported Communists 3
		name = dead_man.2.c
		trigger = {
			dead_man_communists_winning = yes
		}
		set_country_type = recognized
		activate_law = law_type:law_council_republic
		activate_law = law_type:law_technocracy
		activate_law = law_type:law_collectivized_agriculture
		activate_law = law_type:law_command_economy
		activate_law = law_type:law_professional_army
		activate_law = law_type:law_state_atheism
		activate_law = law_type:law_censorship
		activate_law = law_type:law_secret_police
		activate_law = law_type:law_militarized_police
		add_modifier = {
			name = dead_man_coup_success
			months = long_modifier_time
		}
	}
	option = {
		# Supported Republicans 1
		name = dead_man.2.l
		trigger = {
			dead_man_republicans_winning = yes
		}
		set_country_type = recognized
		activate_law = law_type:law_parliamentary_republic
		activate_law = law_type:law_census_voting
		activate_law = law_type:law_national_supremacy
		activate_law = law_type:law_total_separation
		activate_law = law_type:law_public_schools
		activate_law = law_type:law_guaranteed_liberties
		add_modifier = {
			name = dead_man_coup_success
			months = long_modifier_time
		}
	}
	option = {
		# Supported Republicans 2
		name = dead_man.2.m
		trigger = {
			dead_man_republicans_winning = yes
		}
		set_country_type = recognized
		activate_law = law_type:law_parliamentary_republic
		activate_law = law_type:law_wealth_voting
		activate_law = law_type:law_national_supremacy
		activate_law = law_type:law_total_separation
		activate_law = law_type:law_private_schools
		activate_law = law_type:law_private_health_insurance
		add_modifier = {
			name = dead_man_coup_success
			months = long_modifier_time
		}
	}
	option = {
		# Supported Republicans 3
		name = dead_man.2.n
		trigger = {
			dead_man_republicans_winning = yes
		}
		set_country_type = recognized
		activate_law = law_type:law_presidential_republic
		activate_law = law_type:law_oligarchy
		activate_law = law_type:law_national_supremacy
		activate_law = law_type:law_freedom_of_conscience
		activate_law = law_type:law_meritocratic_bureaucracy
		activate_law = law_type:law_interventionism
		activate_law = law_type:law_dedicated_police
		add_modifier = {
			name = dead_man_coup_success
			months = long_modifier_time
		}
	}
	option = {
		# Supported Theocracy 1
		name = dead_man.2.x
		trigger = {
			dead_man_theocrats_winning = yes
		}
		set_country_type = recognized
		activate_law = law_type:law_theocracy
		activate_law = law_type:law_autocracy
		activate_law = law_type:law_state_religion
		activate_law = law_type:law_religious_schools
		activate_law = law_type:law_professional_army
		activate_law = law_type:law_national_guard
		activate_law = law_type:law_censorship
		activate_law = law_type:law_empowered_gendarmerie
		add_modifier = {
			name = dead_man_coup_success
			months = long_modifier_time
		}
	}
	option = {
		# Supported Theocracy 2
		name = dead_man.2.y
		trigger = {
			dead_man_theocrats_winning = yes
		}
		set_country_type = recognized
		activate_law = law_type:law_theocracy
		activate_law = law_type:law_landed_voting
		activate_law = law_type:law_state_religion
		activate_law = law_type:law_religious_schools
		activate_law = law_type:law_agrarianism
		activate_law = law_type:law_homesteading
		activate_law = law_type:law_no_womens_rights
		activate_law = law_type:law_closed_borders
		add_modifier = {
			name = dead_man_coup_success
			months = long_modifier_time
		}
	}
	option = {
		# Supported Theocracy 3
		name = dead_man.2.z
		trigger = {
			dead_man_theocrats_winning = yes
		}
		set_country_type = recognized
		activate_law = law_type:law_theocracy
		activate_law = law_type:law_oligarchy
		activate_law = law_type:law_state_religion
		activate_law = law_type:law_religious_schools
		activate_law = law_type:law_inquisition
		activate_law = law_type:law_faith_orders
		activate_law = law_type:law_religious_schools
		activate_law = law_type:law_charitable_health_system
		activate_law = law_type:law_no_womens_rights
		activate_law = law_type:law_poor_laws
		add_modifier = {
			name = dead_man_coup_success
			months = long_modifier_time
		}
	}
}

dead_man.3 = {
	type = country_event
	placement = root
	title = dead_man.3.t
	desc = dead_man.3.d
	flavor = dead_man.3.f
	duration = 3
	event_image = {
		video = "unspecific_politicians_arguing"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	cooldown = {
		months = normal_modifier_time
	}
	trigger = {
		AND = {
			has_variable = dead_man_ended_var
			has_variable = dead_man_pulse_balk_comm
		}
		NOT = {
			has_variable = dead_man_no_balk
		}
	}
	immediate = {
		set_variable = dead_man_no_balk
		remove_variable ?= dead_man_pulse_balk_comm
	}
	option = {
		# Accept Balkan Loss
		name = dead_man.1.a
		default_option = yes
		imperia_balkan_disintegrate = yes
		change_relations = {
			country = c:SLO
			value = 60
		}
		change_relations = {
			country = c:WAL
			value = 60
		}
		change_relations = {
			country = c:GRE
			value = 60
		}
		change_relations = {
			country = c:SER
			value = 60
		}
		change_relations = {
			country = c:BOS
			value = 60
		}
		change_relations = {
			country = c:SLV
			value = 60
		}
		change_relations = {
			country = c:CRO
			value = 60
		}
		change_relations = {
			country = c:ALB
			value = 60
		}
		change_relations = {
			country = c:BUL
			value = 60
		}
		add_modifier = {
			name = dead_man_balkan_disintegrate_full
			years = long_modifier_time
		}
	}
	option = {
		# We give them a little cake
		name = dead_man.1.b
		set_variable = chose_initial_turk_government
		if = {
			limit = {
				ig:ig_devout.leader = {
					NOT = {
						OR = {
							has_ideology = ideology:ideology_theocrat
							has_ideology = ideology:ideology_traditionalist
							has_ideology = ideology:ideology_authoritarian
							has_ideology = ideology:ideology_slaver
							has_ideology = ideology:ideology_corporatist
						}
					}
				}
			}
			ig:ig_devout.leader = {
				set_ideology = ideology:ideology_theocrat
				add_modifier = {
					name = dead_man_revolutionary
				}
			}
		}
		remove_variable ?= supporting_republican_var 
		remove_variable ?= supporting_communist_var 
		custom_tooltip = {
			text = theocracy_progress_increase_15_tt
			change_variable = {
				name = theocracy_progress
				add = 15
			}
		}
		set_variable = supporting_theocracy_var
	}
	option = {
		# Support Communist
		name = dead_man.1.c
		set_variable = chose_initial_turk_government
		if = {
			limit = {
				ig:ig_trade_unions.leader = {
					NOT = {
						OR = {
							has_ideology = ideology:ideology_communist
							has_ideology = ideology:ideology_vanguardist
							has_ideology = ideology:ideology_anarchist
							has_ideology = ideology:ideology_social_democrat
							has_ideology = ideology:ideology_humanitarian
						}
					}
				}
			}
			ig:ig_trade_unions.leader = {
				set_ideology = ideology:ideology_communist
				add_modifier = {
					name = dead_man_revolutionary
				}
			}
		}
		remove_variable ?= supporting_theocracy_var 
		remove_variable ?= supporting_republican_var 
		custom_tooltip = {
			text = communist_progress_increase_15_tt
			change_variable = {
				name = communist_progress
				add = 15
			}
		}
		set_variable = supporting_communist_var
	}
}

