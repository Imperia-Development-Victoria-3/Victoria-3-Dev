namespace = dead_man
# start event
dead_man.1 = {
	type = country_event
	placement = root
	title = dead_man.1.t
	desc = dead_man.1.d
	flavor = dead_man.1.f
	duration = 3
	event_image = {
		video = "unspecific_factory_closed"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	cooldown = {
		months = normal_modifier_time
	}
	trigger = {
		NOT = {
			has_variable = dead_man_startup_var
		}
	}
	immediate = {
		set_variable = dead_man_startup_var
	}
	option = {
		# Support Republican
		name = dead_man.1.a
		set_variable = chose_initial_turk_government
		if = {
			limit = {
				ig:ig_intelligentsia.leader = {
					NOT = {
						OR = {
							has_ideology = ideology:ideology_republican
							has_ideology = ideology:ideology_radical
							has_ideology = ideology:ideology_atheist							# nihilist
							has_ideology = ideology:ideology_liberal_leader							#democrat
							has_ideology = ideology:ideology_positivist
							has_ideology = ideology:ideology_market_liberal
						}
					}
				}
			}
			ig:ig_intelligentsia.leader = {
				set_ideology = ideology:ideology_republican
				add_modifier = {
					name = dead_man_revolutionary
				}
			}
		}
		if = {
			limit = {
				has_variable = supporting_theocracy_var
			}
			remove_variable = supporting_theocracy_var
		}
		if = {
			limit = {
				has_variable = supporting_communist_var
			}
			remove_variable = supporting_communist_var
		}
		custom_tooltip = {
			text = republican_progress_increase_15_tt
			change_variable = {
				name = republican_progress
				add = 15
			}
		}
		set_variable = supporting_republican_var
		add_journal_entry = {
			type = je_dead_man_main
		}
	}
	option = {
		# Support Theocracy
		name = dead_man.1.b
		default_option = yes
		set_variable = chose_initial_turk_government
		if = {
			limit = {
				ig:ig_devout.leader = {
					NOT = {
						OR = {
							has_ideology = ideology:ideology_theocrat
							has_ideology = ideology:ideology_traditionalist
							has_ideology = ideology:ideology_authoritarian
							has_ideology = ideology:ideology_slaver
							has_ideology = ideology:ideology_corporatist
						}
					}
				}
			}
			ig:ig_devout.leader = {
				set_ideology = ideology:ideology_theocrat
				add_modifier = {
					name = dead_man_revolutionary
				}
			}
		}
		if = {
			limit = {
				has_variable = supporting_republican_var
			}
			remove_variable = supporting_republican_var
		}
		if = {
			limit = {
				has_variable = supporting_communist_var
			}
			remove_variable = supporting_communist_var
		}
		custom_tooltip = {
			text = theocracy_progress_increase_15_tt
			change_variable = {
				name = theocracy_progress
				add = 15
			}
		}
		set_variable = supporting_theocracy_var
		add_journal_entry = {
			type = je_dead_man_main
		}
	}
	option = {
		# Support Communist
		name = dead_man.1.c
		set_variable = chose_initial_turk_government
		if = {
			limit = {
				ig:ig_trade_unions.leader = {
					NOT = {
						OR = {
							has_ideology = ideology:ideology_communist
							has_ideology = ideology:ideology_vanguardist
							has_ideology = ideology:ideology_anarchist
							has_ideology = ideology:ideology_social_democrat
							has_ideology = ideology:ideology_humanitarian
						}
					}
				}
			}
			ig:ig_trade_unions.leader = {
				set_ideology = ideology:ideology_communist
				add_modifier = {
					name = dead_man_revolutionary
				}
			}
		}
		if = {
			limit = {
				has_variable = supporting_republican_var
			}
			remove_variable = supporting_republican_var
		}
		if = {
			limit = {
				has_variable = supporting_theocracy_var
			}
			remove_variable = supporting_theocracy_var
		}
		custom_tooltip = {
			text = communist_progress_increase_15_tt
			change_variable = {
				name = communist_progress
				add = 15
			}
		}
		set_variable = supporting_communist_var
		add_journal_entry = {
			type = je_dead_man_main
		}
	}
}
