namespace = discord_break
# Event for 100 - 200 discord
discord_break.1 = {
	type = country_event
	title = discord_break.1.t
	# A mandatory intro and 2 random options generated in the immediate
	flavor = {
		desc = discord_break.1.desc.firstly
		# First option
		random_valid = {
			# Minor Public dissatisfaction
			triggered_desc = {
				desc = discord_break.1.desc.a
				trigger = {
					var:first_option = 1
				}
			}
			# Occasional Protest
			triggered_desc = {
				desc = discord_break.1.desc.b
				trigger = {
					var:first_option = 2
				}
			}
			# Slight decrease in government efficiency
			triggered_desc = {
				desc = discord_break.1.desc.c
				trigger = {
					var:first_option = 3
				}
			}
			# Mild increase in corruption
			triggered_desc = {
				desc = discord_break.1.desc.d
				trigger = {
					var:first_option = 4
				}
			}
			# Small scale strike
			triggered_desc = {
				desc = discord_break.1.desc.e
				trigger = {
					var:first_option = 5
				}
			}
			# Marginal decrease in productivity
			triggered_desc = {
				desc = discord_break.1.desc.f
				trigger = {
					var:first_option = 6
				}
			}
			# Increase in political debates
			triggered_desc = {
				desc = discord_break.1.desc.g
				trigger = {
					var:first_option = 7
				}
			}
			# Slight decrease in foreign investment/confidence
			triggered_desc = {
				desc = discord_break.1.desc.h
				trigger = {
					var:first_option = 8
				}
			}
		}
		desc = discord_break.1.desc.interim_intro
		# Second option
		random_valid = {
			# Minor Public dissatisfaction
			triggered_desc = {
				desc = discord_break.1.desc.a
				trigger = {
					var:second_option = 1
				}
			}
			# Occasional Protest
			triggered_desc = {
				desc = discord_break.1.desc.b
				trigger = {
					var:second_option = 2
				}
			}
			# Slight decrease in government efficiency
			triggered_desc = {
				desc = discord_break.1.desc.c
				trigger = {
					var:second_option = 3
				}
			}
			# Mild increase in corruption
			triggered_desc = {
				desc = discord_break.1.desc.d
				trigger = {
					var:second_option = 4
				}
			}
			# Small scale strike
			triggered_desc = {
				desc = discord_break.1.desc.e
				trigger = {
					var:second_option = 5
				}
			}
			# Marginal decrease in productivity
			triggered_desc = {
				desc = discord_break.1.desc.f
				trigger = {
					var:second_option = 6
				}
			}
			# Increase in political debates
			triggered_desc = {
				desc = discord_break.1.desc.g
				trigger = {
					var:second_option = 7
				}
			}
			# Slight decrease in foreign investment/confidence
			triggered_desc = {
				desc = discord_break.1.desc.h
				trigger = {
					var:second_option = 8
				}
			}
		}
	}
	desc = discord_break.1.flavor
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"
	}
	icon = "gfx/interface/icons/event_icons/event_fire.dds"
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"
	duration = 3
	immediate = {
		random_scope_state = {
			save_scope_as = peaceful_protest_state
		}
		random_scope_state = {
			save_scope_as = corrupt_state
		}
		random_scope_building = {
			save_scope_as = striking_building
		}
		random_country = {
			limit = {
				has_diplomatic_relevance = root
			}
			save_scope_as = foreign_investor
		}
		random_list = {
			# This gets lower as discord moves towards 200
			0 = {
				modifier = {
					add = discord_break_lvl_1_lower
				}
				random_list = {
					1 = {
						set_variable = {
							name = first_option
							value = 1
						}
					}
					1 = {
						set_variable = {
							name = first_option
							value = 2
						}
					}
					1 = {
						set_variable = {
							name = first_option
							value = 3
						}
					}
					1 = {
						set_variable = {
							name = first_option
							value = 4
						}
					}
				}
			}
			# This gets higher as discord moves towards 200
			0 = {
				modifier = {
					add = discord_break_lvl_1_upper
				}
				random_list = {
					1 = {
						set_variable = {
							name = first_option
							value = 5
						}
					}
					1 = {
						set_variable = {
							name = first_option
							value = 6
						}
					}
					1 = {
						set_variable = {
							name = first_option
							value = 7
						}
					}
					1 = {
						set_variable = {
							name = first_option
							value = 8
						}
					}
				}
			}
		}
		random_list = {
			# This gets lower as discord moves towards 200
			0 = {
				modifier = {
					add = discord_break_lvl_1_lower
				}
				random_list = {
					# This chooses a DIFFERENT second option
					1 = {
						trigger = {
							var:first_option != 1
						}
						set_variable = {
							name = second_option
							value = 1
						}
					}
					1 = {
						trigger = {
							var:first_option != 2
						}
						set_variable = {
							name = second_option
							value = 2
						}
					}
					1 = {
						trigger = {
							var:first_option != 3
						}
						set_variable = {
							name = second_option
							value = 3
						}
					}
					1 = {
						trigger = {
							var:first_option != 4
						}
						set_variable = {
							name = second_option
							value = 4
						}
					}
				}
			}
			# This gets higher as discord moves towards 200
			0 = {
				modifier = {
					add = discord_break_lvl_1_upper
				}
				random_list = {
					1 = {
						trigger = {
							var:first_option != 5
						}
						set_variable = {
							name = second_option
							value = 5
						}
					}
					1 = {
						trigger = {
							var:first_option != 6
						}
						set_variable = {
							name = second_option
							value = 6
						}
					}
					1 = {
						trigger = {
							var:first_option != 7
						}
						set_variable = {
							name = second_option
							value = 7
						}
					}
					1 = {
						trigger = {
							var:first_option != 8
						}
						set_variable = {
							name = second_option
							value = 8
						}
					}
				}
			}
		}
	}
	# Minor public dissatisfaction
	option = {
		name = discord_break.1.a
		trigger = {
			OR = {
				var:first_option = 1
				var:second_option = 1
			}
		}
		# 0.5% radicals in entire country
		add_radicals = {
			value = 0.005
		}
	}
	# Peaceful Protest
	option = {
		name = discord_break.1.b
		trigger = {
			OR = {
				var:first_option = 2
				var:second_option = 2
			}
		}
		scope:peaceful_protest_state = {
			# 5% radicals in random state
			add_radicals_in_state = {
				value = 0.05
			}
		}
	}
	# Slight decrease in government efficiency
	option = {
		name = discord_break.1.c
		trigger = {
			OR = {
				var:first_option = 3
				var:second_option = 3
			}
		}
		# -5% bureaucracy penalty
		add_modifier = {
			name = discord_bureaucracy_penalty
			multiplier = 5
			months = 12
		}
	}
	# Mild increase in corruption
	option = {
		name = discord_break.1.d
		trigger = {
			OR = {
				var:first_option = 4
				var:second_option = 4
			}
		}
		# 10% less tax collected in state
		scope:corrupt_state = {
			add_modifier = {
				name = discord_state_corruption_penalty
				multiplier = 10
				months = 12
			}
		}
	}
	# Small-scale strike
	option = {
		name = discord_break.1.e
		trigger = {
			OR = {
				var:first_option = 5
				var:second_option = 5
			}
		}
		# -25% throughput in random building in entire country
		scope:striking_building = {
			add_modifier = {
				name = discord_building_strike
				multiplier = 25
				months = 12
			}
		}
	}
	# Marginal decrease in productivity
	option = {
		name = discord_break.1.f
		trigger = {
			OR = {
				var:first_option = 6
				var:second_option = 6
			}
		}
		add_modifier = {
			name = discord_country_nationwide_disruption
			multiplier = 2
			months = 12
		}
	}
	# Increase in political debates and demands for reform
	option = {
		name = discord_break.1.g
		trigger = {
			OR = {
				var:first_option = 7
				var:second_option = 7
			}
		}
		# If theres a spot, create a random agitator
		if = {
			limit = {
				empty_agitator_slots > 0
			}
			# Show a character being created
			show_as_tooltip = {
				create_character = {
					is_agitator = yes
				}
			}
			# Create a random swing-group agitator
			hidden_effect = {
				random_list = {
					1 = {
						create_character = {
							is_agitator = yes
							interest_group = ig_armed_forces
						}
					}
					1 = {
						create_character = {
							is_agitator = yes
							interest_group = ig_rural_folk
						}
					}
					1 = {
						create_character = {
							is_agitator = yes
							interest_group = ig_petty_bourgeoisie
						}
					}
				}
			}
		}
		# Else just give 1.5% radicals
		else = {
			add_radicals = {
				value = 0.015
			}
		}
	}
	# Slight decrease in foreign (investment) confidence
	option = {
		name = discord_break.1.h
		trigger = {
			OR = {
				var:first_option = 8
				var:second_option = 8
			}
		}
		random_country = {
			limit = {
				has_diplomatic_relevance = root
			}
			change_relations = {
				country = root
				value = -10
			}
		}
	}
	after = {
		remove_variable = first_option
		remove_variable = second_option
	}
}
